syntax = "proto3";

package mws.rng;

import "data.proto";
import "msg_dump.proto";
import "msg_repl.proto";

message Msg {
  oneof msg_type {
    ChangeState changeState = 11;
    DumpBucketData dumpBucketData = 9;
    DumpEn dumpEn = 10;
    DumpGet dumpGet = 8;
    DumpGetBucketData dumpGetBucketData = 5;
    DumpPut dumpPut = 7;
    ReplBucketPut replBucketPut = 4;
    ReplBucketUpToDate replBucketUpToDate = 14;
    ReplGetBucketIfNew replGetBucketIfNew = 13;
    ReplNewerBucketData replNewerBucketData = 15;
    Saved saved = 12;
    StoreDelete storeDelete = 3;
    StoreGet storeGet = 1;
    StoreGetAck storeGetAck = 6;
    StorePut storePut = 2;
  }
}

message StoreGet {
  bytes key = 1;
}

message StorePut {
  Data data = 1;
}

message StoreDelete {
  bytes key = 1;
}

message StoreGetAck {
  repeated Data d = 1;
}

message ChangeState {
  int32 quorumState = 1;
}

message Saved {
}
